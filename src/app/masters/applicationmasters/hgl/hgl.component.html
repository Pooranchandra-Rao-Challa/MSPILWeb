<div class="col-12">
  <div class="card">
    <p-toast key="tst"></p-toast>

    <!-- toolbar -->
    <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
        <h4>HGLs</h4>
      </ng-template>
      <ng-template pTemplate="right">
        <button pButton pRipple label="New HGL" icon="pi pi-plus" class="p-button-primary p-mr-2" (click)="addHgl()"
          (click)="addSubHgl()" *ngIf="permissions.CanCreateHGL"></button>
      </ng-template>
    </p-toolbar>

    <!-- table -->
    <p-table #dt1 [value]="hgls" dataKey="id" [rows]="10" [rowHover]="true"
      styleClass="p-datatable-gridlines p-datatable-striped p-datatable-sm" [paginator]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [showCurrentPageReport]="true"
      [globalFilterFields]="globalFilterFields" [autoLayout]="true" responsiveLayout="scroll"
      [rowsPerPageOptions]="[10,25,50]" [tableStyle]="{ width: 'max-content'}">
      <ng-template pTemplate="caption">
        <div class="flex justify-content-between flex-column sm:flex-row">
          <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash"
            (click)="clear(dt1)"></button>
          <span class="p-input-icon-left mb-2">
            <i class="pi pi-search"></i>
            <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Search Keyword"
              class="w-full" />
          </span>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th></th>
          <th pSortableColumn="code">
            Code <p-columnFilter type="text" field="code" display="menu"></p-columnFilter>
            <p-sortIcon field="code"></p-sortIcon>
          </th>
          <th pSortableColumn="name">
            Name <p-columnFilter type="text" field="name" display="menu"></p-columnFilter>
            <p-sortIcon field="name"></p-sortIcon>
          </th>
          <th pSortableColumn="gender">
            Gender <p-columnFilter type="text" field="gender" display="menu"></p-columnFilter>
            <p-sortIcon field="gender"></p-sortIcon>
          </th>
          <th pSortableColumn="relationTypeName">
            Relationship Type <p-columnFilter type="text" field="relationTypeName" display="menu"></p-columnFilter>
            <p-sortIcon field="relationTypeName"></p-sortIcon>
          </th>
          <th pSortableColumn="relationName">
            Relationship Name <p-columnFilter type="text" field="relationName" display="menu"></p-columnFilter>
            <p-sortIcon field="relationName"></p-sortIcon>
          </th>
          <th pSortableColumn="address">
            Address <p-columnFilter type="text" field="address" display="menu"></p-columnFilter>
            <p-sortIcon field="address"></p-sortIcon>
          </th>
          <th pSortableColumn="pinCode">
            PinCode <p-columnFilter type="text" field="pinCode" display="menu"></p-columnFilter>
            <p-sortIcon field="pinCode"></p-sortIcon>
          </th>
          <th pSortableColumn="phoneNo">
            Phone No <p-columnFilter type="text" field="phoneNo" display="menu"></p-columnFilter>
            <p-sortIcon field="phoneNo"></p-sortIcon>
          </th>
          <th pSortableColumn="email">
            Email <p-columnFilter type="text" field="email" display="menu"></p-columnFilter>
            <p-sortIcon field="email"></p-sortIcon>
          </th>
          <th pSortableColumn="panNo">
            Pan No <p-columnFilter type="text" field="panNo" display="menu"></p-columnFilter>
            <p-sortIcon field="panNo"></p-sortIcon>
          </th>
          <th pSortableColumn="aadhaarNo">
            Aadhaar No <p-columnFilter type="text" field="aadhaarNo" display="menu"></p-columnFilter>
            <p-sortIcon field="aadhaarNo"></p-sortIcon>
          </th>
          <th pSortableColumn="tax">
            Tax <p-columnFilter type="text" field="tax" display="menu"></p-columnFilter>
            <p-sortIcon field="tax"></p-sortIcon>
          </th>
          <th pSortableColumn="tds" style="text-align:center">
            TDS <p-columnFilter type="text" field="tds" display="menu"></p-columnFilter>
            <p-sortIcon field="tds"></p-sortIcon>
          </th>
          <th pSortableColumn="guarantor1">
            Guarantor1 <p-columnFilter type="text" field="guarantor1" display="menu"></p-columnFilter>
            <p-sortIcon field="guarantor1"></p-sortIcon>
          </th>
          <th pSortableColumn="guarantor2">
            Guarantor2 <p-columnFilter type="text" field="guarantor2" display="menu"></p-columnFilter>
            <p-sortIcon field="guarantor2"></p-sortIcon>
          </th>
          <th pSortableColumn="guarantor3">
            Guarantor3 <p-columnFilter type="text" field="guarantor3" display="menu"></p-columnFilter>
            <p-sortIcon field="guarantor3"></p-sortIcon>
          </th>
          <th pSortableColumn="bankName">
            Bank Name <p-columnFilter type="text" field="bankName" display="menu"></p-columnFilter>
            <p-sortIcon field="bankName"></p-sortIcon>
          </th>
          <th pSortableColumn="branchName">
            Branch Name <p-columnFilter type="text" field="branchName" display="menu"></p-columnFilter>
            <p-sortIcon field="branchName"></p-sortIcon>
          </th>
          <th pSortableColumn="ifsc">
            IFSC <p-columnFilter type="text" field="ifsc" display="menu"></p-columnFilter>
            <p-sortIcon field="ifsc"></p-sortIcon>
          </th>
          <th pSortableColumn="accountNo">
            Account No <p-columnFilter type="text" field="accountNo" display="menu"></p-columnFilter>
            <p-sortIcon field="accountNo"></p-sortIcon>
          </th>
          <th pSortableColumn="glCode">
            Gang Leader Code<p-columnFilter type="text" field="glCode" display="menu"></p-columnFilter>
            <p-sortIcon field="glCode"></p-sortIcon>
          </th>
          <th pSortableColumn="subGLCode">
            Sub Gang Leader Code<p-columnFilter type="text" field="subGLCode" display="menu"></p-columnFilter>
            <p-sortIcon field="subGLCode"></p-sortIcon>
          </th>
          <th pSortableColumn="otherCode">
            Other Code <p-columnFilter type="text" field="otherCode" display="menu"></p-columnFilter>
            <p-sortIcon field="otherCode"></p-sortIcon>
          </th>
          <th pSortableColumn="isActive" style="text-align:center">
            Is Active <p-columnFilter type="text" field="isActive" display="menu"></p-columnFilter>
            <p-sortIcon field="isActive"></p-sortIcon>
          </th>
          <th pSortableColumn="createdAt">
            Created Date <p-columnFilter type="text" field="createdAt" display="menu"></p-columnFilter>
            <p-sortIcon field="createdAt"></p-sortIcon>
          </th>
          <th pSortableColumn="createdBy">
            Created By <p-columnFilter type="text" field="createdBy" display="menu"></p-columnFilter>
            <p-sortIcon field="createdBy"></p-sortIcon>
          </th>
          <th pSortableColumn="updatedAt">
            Updated Date <p-columnFilter type="text" field="updatedAt" display="menu"></p-columnFilter>
            <p-sortIcon field="updatedAt"></p-sortIcon>
          </th>
          <th pSortableColumn="updatedBy">
            Updated By <p-columnFilter type="text" field="updatedBy" display="menu"></p-columnFilter>
            <p-sortIcon field="updatedBy"></p-sortIcon>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-hgl>
        <tr>
          <td><button pButton pRipple icon="pi pi-pencil" class="p-element p-ripple p-button-text p-button p-component"
              (click)="editHgl(hgl)" [disabled]="!permissions.CanUpdateHGL"></button></td>
          <td>{{hgl.code}}</td>
          <td>{{hgl.name}}</td>
          <td>{{hgl.gender}}</td>
          <td>{{hgl.relationTypeName}}</td>
          <td>{{hgl.relationName}}</td>
          <td>{{hgl.address}}</td>
          <td>{{hgl.pinCode}}</td>
          <td>{{hgl.phoneNo}}</td>
          <td>{{hgl.email}}</td>
          <td>{{hgl.panNo}}</td>
          <td>{{hgl.aadhaarNo}}</td>
          <td>{{hgl.tax}}</td>
          <td style="text-align:center">
            <p-checkbox name="tds" value="tds" [(ngModel)]="hgl.tds" [binary]="true" [disabled]="true">
            </p-checkbox>
          </td>
          <td>{{hgl.guarantor1}}</td>
          <td>{{hgl.guarantor2}}</td>
          <td>{{hgl.guarantor3}}</td>
          <td>{{hgl.bankName}}</td>
          <td>{{hgl.branchName}}</td>
          <td>{{hgl.ifsc}}</td>
          <td>{{hgl.accountNo}}</td>
          <td>{{hgl.glCode}}</td>
          <td>{{hgl.subGLCode}}</td>
          <td>{{hgl.otherCode}}</td>
          <td>
            <p-checkbox name="active" value="active" [(ngModel)]="hgl.isActive" [binary]="true" [disabled]="true">
            </p-checkbox>
          </td>
          <td>{{hgl.createdAt | date: 'dd-MMM-yyyy'}}</td>
          <td>{{hgl.createdBy}}</td>
          <td>{{hgl.updatedAt | date: 'dd-MMM-yyyy'}}</td>
          <td>{{hgl.updatedBy}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td class="md:text-center" colspan="50%">No HGLs Found.</td>
        </tr>
      </ng-template>
    </p-table>

    <!-- dialog box -->
    <p-dialog header="HGLs" [(visible)]="showDialog" showEffect="fade"
      [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '60vw'}" [modal]="true">
      <div class="flex flex-column align-items-center justify-content-center">
        <div class="container">
          <div class="grid p-fluid">
            <form [formGroup]="fbHgl" (ngSubmit)="onSubmit()">
              <p-fieldset legend="HGL Info" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                <div class="grid p-fluid">
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Code:<sup class="p-error">*</sup></label>
                    <input pInputText id="code" type="text" #code placeholder="Enter Code" formControlName="code"
                      alphaNumeric [readonly]="fbHgl.value.hglId" [maxlength]="20"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['code'].touched && FormControls['code'].errors }">
                    <div class="text-right">
                      <small>{{code.value.length}}/20</small>
                    </div>
                    <span *ngIf="FormControls['code'].touched && FormControls['code'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['code'].errors?.['required']">
                        Please Enter Code.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['code'].errors?.['minlength']">
                        Code Min Length Is 2 .</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['code'].errors?.['maxlength']">
                        Code Max Length Is 20.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['code'].errors?.['pattern']">
                        Code Should Contains Only Alpha Numeric.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Name:<sup class="p-error">*</sup></label>
                    <input pInputText id="name" #name type="text" placeholder="Enter Name" formControlName="name"
                      alphaOnly [maxlength]="maxLength.name"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['name'].touched && FormControls['name'].errors }">
                    <div class="text-right">
                      <small>{{name.value.length}}/{{maxLength.name}}</small>
                    </div>
                    <span *ngIf="FormControls['name'].touched && FormControls['name'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['name'].errors?.['required']">
                        Please Enter Name.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['name'].errors?.['minlength']">
                        Name Min Characters Is 2.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['name'].errors?.['pattern']">
                        Name Should Contains Only Alphabets.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Relationship Type:<sup class="p-error">*</sup></label>
                    <p-dropdown placeholder="Select Relation Type" optionLabel="name" [options]="relationTypes"
                      optionValue="lookupDetailId" formControlName="relationTypeId"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['relationTypeId'].touched && FormControls['relationTypeId'].errors }">
                    </p-dropdown>
                    <span *ngIf="FormControls['relationTypeId'].touched && FormControls['relationTypeId'].invalid">
                      <div class="ng-invalid ng-touched p-error"
                        *ngIf="FormControls['relationTypeId'].errors?.['required']">
                        Please Select Relation.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Relationship Name:<sup class="p-error">*</sup></label>
                    <input pInputText id="relationName" #relationName type="text" placeholder="Enter Relation Name"
                      formControlName="relationName" alphaOnly [maxlength]="maxLength.name"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['relationName'].touched && FormControls['relationName'].errors }">
                    <div class="text-right">
                      <small> {{relationName.value.length}}/{{maxLength.name}} </small>
                    </div>
                    <span *ngIf="FormControls['relationName'].touched && FormControls['relationName'].invalid">
                      <div class="ng-invalid ng-touched p-error"
                        *ngIf="FormControls['relationName'].errors?.['required']">
                        Please Enter Relationship Name.</div>
                      <div class="ng-invalid ng-touched p-error"
                        *ngIf="FormControls['relationName'].errors?.['minlength']">
                        Relationship Name Min Characters Is 2.</div>
                      <div class="ng-invalid ng-touched p-error"
                        *ngIf="FormControls['relationName'].errors?.['pattern']">
                        Relationship Name Should Contains Only Alphabets.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Gender:<sup class="p-error">*</sup></label>
                    <p-dropdown placeholder="Select Gender" [options]="genders" formControlName="gender"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['gender'].touched && FormControls['gender'].errors }">
                    </p-dropdown>
                    <span *ngIf="FormControls['gender'].touched && FormControls['gender'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['gender'].errors?.['required']">
                        Please Select Gender.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Address:<sup class="p-error">*</sup></label>
                    <textarea rows="2" cols="30" placeholder="Enter Address" #address pInputTextarea
                      formControlName="address" [maxlength]="maxLength.address" address
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['address'].touched && FormControls['address'].errors }"></textarea>
                    <div class="text-right">
                      <small>{{address.value.length}}/{{maxLength.address}} </small>
                    </div>
                    <span *ngIf="FormControls['address'].touched && FormControls['address'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['address'].errors?.['required']">
                        Please Enter Address.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['address'].errors?.['pattern']">
                        Field Cannot Start Or End With Spaces.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>PinCode:<sup class="p-error">*</sup></label>
                    <input pInputText id="pinCode" #pinCode type="text" placeholder="Enter Pin Code"
                      formControlName="pinCode" numericOnly [maxlength]="maxLength.pinCode"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['pinCode'].touched && FormControls['pinCode'].errors }">
                    <div class="text-right">
                      <small>
                        {{pinCode.value.length}}/{{maxLength.pinCode}}
                      </small>
                    </div>
                    <span *ngIf="FormControls['pinCode'].touched && FormControls['pinCode'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['pinCode'].errors?.['minlength']">
                        Please Enter 6 Digits PinCode .</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['pinCode'].errors?.['required']">
                        Please Enter Pin Code.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Mobile No:</label>
                    <input pInputText id="phoneNo" #phoneNo placeholder="Enter Mobile No" formControlName="phoneNo"
                      numericOnly [maxlength]="maxLength.phoneNo"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['phoneNo'].touched && FormControls['phoneNo'].errors }">
                    <div class="text-right">
                      <small> {{phoneNo.value.length}}/{{maxLength.phoneNo}} </small>
                    </div>
                    <span *ngIf="FormControls['phoneNo'].touched && FormControls['phoneNo'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['phoneNo'].errors?.['required']">
                        Please Enter Mobile No.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['phoneNo'].errors?.['pattern']">
                        First Digit Should Be Greater Than 4 And Must Contains 10 Digits.</div>
                    </span>
                  </div>
                </div>
              </p-fieldset>
              <p-fieldset legend="Personal Info" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                <div class="grid p-fluid">
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Email:</label>
                    <input pInputText id="email" type="text" placeholder="Enter Email" formControlName="email"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['email'].touched && FormControls['email'].errors }">
                    <span *ngIf="FormControls['email'].touched && FormControls['email'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['email'].errors?.['required']">
                        Please Enter Email.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['email'].errors?.['pattern']">
                        Email Contains Only Alphabets, Integers And Periods(.)</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label for="panNo">PAN No:</label>
                    <input pInputText id="panNo" type="text" placeholder="Enter Pan No " formControlName="panNo"
                      maxLength="10" style="text-transform:uppercase" alphaNumeric
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['panNo'].touched && FormControls['panNo'].invalid }">
                    <div *ngIf="FormControls['panNo'].touched && FormControls['panNo'].invalid">
                      <span *ngIf="FormControls['panNo'].touched && FormControls['panNo'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['panNo'].errors?.['pattern']">
                          Invalid Pan Number, Eg: ABCDE01234X</div>
                      </span>
                    </div>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label class="required">Aadhaar No:</label>
                    <input pInputText id="aadhaarNo" #aadhaarNo placeholder=" Enter Aadhaar No"
                      formControlName="aadhaarNo" maxlength="12" [maxlength]="maxLength.aadhaarNo" numericOnly
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['aadhaarNo'].touched && FormControls['aadhaarNo'].errors }">
                    <div class="text-right">
                      <small> {{aadhaarNo.value.length}}/{{maxLength.aadhaarNo}} </small>
                    </div>
                    <span *ngIf="FormControls['aadhaarNo'].touched && FormControls['aadhaarNo'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['aadhaarNo'].errors?.['required']">
                        Please Enter Aadhaar No.</div>
                      <div class="ng-invalid ng-touched p-error"
                        *ngIf="FormControls['aadhaarNo'].errors?.['minlength']">
                        Aadhaar No Min Length Is 12.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['aadhaarNo'].errors?.['pattern']">
                        Please Enter Valid Aadhaar No.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label class="required">TAX:</label>
                    <input pInputText id="tax" #aadhaarNo placeholder=" Enter tax " formControlName="tax" maxlength="9"
                      numericOnly
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['tax'].touched && FormControls['tax'].errors }">
                    <span *ngIf="FormControls['tax'].touched && FormControls['tax'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['tax'].errors?.['required']">
                        Please Enter Tax Number.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Guarantor1:</label>
                    <input pInputText id="guarantor1" type="text" placeholder=" Enter Guarantor1"
                      formControlName="guarantor1"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['guarantor1'].touched && FormControls['guarantor1'].errors }">
                    <span *ngIf="FormControls['guarantor1'].touched && FormControls['guarantor1'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['guarantor1'].errors?.['pattern']">
                        Guarantor1 Contains Only Characters And Integers.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Guarantor2:</label>
                    <input pInputText id="guarantor2" type="text" placeholder=" Enter Guarantor2"
                      formControlName="guarantor2"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['guarantor2'].touched && FormControls['guarantor2'].errors }">
                    <span *ngIf="FormControls['guarantor2'].touched && FormControls['guarantor2'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['guarantor2'].errors?.['pattern']">
                        Guarantor2 Contains Only Characters And Integers.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Guarantor3:</label>
                    <input pInputText id="guarantor3" type="text" placeholder=" Enter Guarantor3"
                      formControlName="guarantor3"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['guarantor3'].touched && FormControls['guarantor3'].errors }">
                    <span *ngIf="FormControls['guarantor3'].touched && FormControls['guarantor3'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['guarantor3'].errors?.['pattern']">
                        Guarantor3 Contains Only Characters And Integers.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>GL Code:</label>
                    <input pInputText id="glcode" type="text" placeholder=" Enter Sub GLCode" formControlName="glcode"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['glcode'].touched && FormControls['glcode'].errors }">
                    <span *ngIf="FormControls['glcode'].touched && FormControls['glcode'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['glcode'].errors?.['pattern']">
                        Sub Glcode Contains Only Characters And Integers.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>SubGL Code:</label>
                    <input pInputText id="subGlcode" type="text" placeholder=" Enter Sub GLCode"
                      formControlName="subGlcode"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['subGlcode'].touched && FormControls['subGlcode'].errors }">
                    <span *ngIf="FormControls['subGlcode'].touched && FormControls['subGlcode'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['subGlcode'].errors?.['pattern']">
                        Sub Glcode Contains Only Characters And Integers.</div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Other Code:</label>
                    <input pInputText id="otherCode" type="text" placeholder=" Enter Other Code"
                      formControlName="otherCode"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['otherCode'].touched && FormControls['otherCode'].errors }">
                    <span *ngIf="FormControls['otherCode'].touched && FormControls['otherCode'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['otherCode'].errors?.['pattern']">
                        Other Code Contains only Characters And Integers.</div>
                    </span>
                  </div>
                </div>
              </p-fieldset>
              <p-fieldset legend="Bank Info" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                <div class="grid p-fluid">
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Bank:<sup class="p-error">*</sup></label>
                    <p-dropdown placeholder="Select Bank" [filter]="true" filterBy="name" [virtualScroll]="true"
                      [virtualScrollItemSize]="38" appendTo="body" optionLabel="name" [options]="banks"
                      formControlName="bankId" optionValue="bankId" (onChange)="getBranchByBankId($event.value)">
                    </p-dropdown>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Branch:<sup class="p-error">*</sup></label>
                    <p-dropdown placeholder="Select Branch" optionLabel="name" [options]="branches"
                      optionValue="branchId" formControlName="branchId" (onChange)="getIFSCByBranch($event.value)">
                    </p-dropdown>
                    <span *ngIf="FormControls['branchId'].touched && FormControls['branchId'].invalid">
                      <div *ngIf="FormControls['branchId'].touched && FormControls['branchId'].invalid">
                        <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['branchId'].errors?.['required']">
                          Please Select Bank First.</div>
                      </div>
                      <div *ngIf="FormControls['branchId'].touched && FormControls['branchId'].valid">
                        <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['branchId'].errors?.['required']">
                          Please Select Branch.</div>
                      </div>
                    </span>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>IFSC:</label>
                    <input pInputText id="ifsc" placeholder=" IFSC Code" [(ngModel)]="IFSC"
                      [ngModelOptions]="{standalone: true}" readonly>
                  </div>
                  <div class="field col-12 lg:col-3 md:col-6 sm:col-6">
                    <label>Account Number:<sup class="p-error">*</sup></label>
                    <input pInputText id="accountNo" #accountNo type="text" placeholder="Enter Account Number"
                      formControlName="accountNo" [maxlength]="maxLength.accountNo" numericOnly
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['accountNo'].touched && FormControls['accountNo'].errors }">
                    <div class="text-right">
                      <small> {{accountNo.value.length}}/{{maxLength.accountNo}} </small>
                    </div>
                    <span *ngIf="FormControls['accountNo'].touched && FormControls['accountNo'].invalid">
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['accountNo'].errors?.['required']">
                        Please Enter Account Number.</div>
                      <div class="ng-invalid ng-touched p-error"
                        *ngIf="FormControls['accountNo'].errors?.['minlength']">
                        Account Number Min Length Is 9.</div>
                      <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['accountNo'].errors?.['pattern']">
                        Account Number Contains Only Integers.</div>
                    </span>
                  </div>
                  <div class="field col-12 md:col-2 mt-3">
                    <label>TDS:</label><br>
                    <p-inputSwitch formControlName="tds"></p-inputSwitch>
                  </div>
                  <div class="field col-12 md:col-2 mt-3">
                    <label>Is Active:</label><br>
                    <p-inputSwitch formControlName="isActive"></p-inputSwitch>
                  </div>
                </div>
              </p-fieldset>

              <!-- //formArray -->
              <p-fieldset legend="Sub Hgl" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                <div class="grid p-fluid">
                  <div class="field col-12 lg:col-9 md:col-7"></div>
                  <div class="field col-12 lg:col-3 md:col-5">
                    <button pButton pRipple type="button" label="Add Sub HGL Details"
                      class="p-button-raised p-button-primary md:col-4 lg:col-3 xl:col-2 md:mt-5 align-self-end "
                      (click)="addSubHgl()"></button>
                  </div>
                  <div class="col-12" formArrayName="subHgls" *ngIf="showSubHgl">
                    <p-table #dt2 [value]="faSubHgl().controls" dataKey="id" [rows]="10" [rowHover]="true"
                      styleClass="p-datatable-gridlines p-datatable-striped p-datatable-sm" [paginator]="false"
                      [autoLayout]="true" responsiveLayout="scroll" [rowsPerPageOptions]="[10,25,50]">
                      <ng-template pTemplate="header">
                        <tr>
                          <th>Code <sup class="p-error">*</sup></th>
                          <th>Name <sup class="p-error">*</sup></th>
                          <th>Vehicle Type <sup class="p-error">*</sup></th>
                          <th>No Of Persons <sup class="p-error">*</sup></th>
                          <th *ngIf="fbHgl.controls['subHgls'].value.length > 1"></th>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-hgl let-subHglIndex="rowIndex">
                        <tr [formGroupName]="subHglIndex">
                          <td class="vertical-align-top">
                            <input pInputText #code class="form-control" type="text" placeholder="Enter Code"
                              formControlName="code" [maxlength]="20" alphaNumeric [ngClass]="{ 'is-invalid ng-dirty': formArrayControls(subHglIndex, 'code')?.touched &&
                          formArrayControls(subHglIndex, 'code')?.errors }">
                            <div class="text-right">
                              <small>{{code.value.length}}/20</small>
                            </div>
                            <span
                              *ngIf="formArrayControls(subHglIndex, 'code')?.touched && formArrayControls(subHglIndex, 'code')?.invalid">
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'code')?.errors?.['required']">
                                Please Enter Code.</div>
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'code')?.errors?.['minlength']">
                                Code Min Length Is 2 .</div>
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'code')?.errors?.['maxlength']">
                                Code Max Length Is 20.</div>
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'code')?.errors?.['pattern']">
                                Code Should Contains Only Alpha Numeric.</div>
                            </span>
                          </td>
                          <td class="vertical-align-top">
                            <input pInputText class="form-control" #name type="text" placeholder="Enter Name"
                              formControlName="name" [maxlength]="maxLength.name" alphaOnly [ngClass]="{ 'is-invalid ng-dirty': formArrayControls(subHglIndex, 'name')?.touched &&
                          formArrayControls(subHglIndex, 'name')?.errors }">
                            <div class="text-right">
                              <small>{{name.value.length}}/{{maxLength.name}}</small>
                            </div>
                            <span
                              *ngIf="formArrayControls(subHglIndex, 'name')?.touched && formArrayControls(subHglIndex, 'name')?.invalid">
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'name')?.errors?.['required']">
                                Please Select Vehicle Type.</div>
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'name')?.errors?.['minlength']">
                                Name Min Characters Is 2.</div>
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'name')?.errors?.['pattern']">
                                Name Should Not Start Or End With Blank Space.</div>
                            </span>
                          </td>
                          <td class="vertical-align-top">
                            <p-dropdown placeholder="Select Vehicle" [options]="vehicleTypes"
                              formControlName="vehicleTypeId" optionLabel="name" optionValue="vehicleTypeId"
                              appendTo="body" [ngClass]="{ 'is-invalid ng-dirty': formArrayControls(subHglIndex, 'vehicleTypeId')?.touched &&
                              formArrayControls(subHglIndex, 'vehicleTypeId')?.errors }">
                            </p-dropdown>
                            <span
                              *ngIf="formArrayControls(subHglIndex, 'vehicleTypeId')?.touched && formArrayControls(subHglIndex, 'vehicleTypeId')?.invalid">
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'vehicleTypeId')?.errors?.['required']">
                                Please Select Vehicle Type.</div>
                            </span>
                          </td>
                          <td class="vertical-align-top">
                            <p-inputNumber inputId="noOfPersons" placeholder="Enter No Of Persons"
                              formControlName="noOfPersons" [showButtons]="true" [ngClass]="{ 'is-invalid ng-dirty': formArrayControls(subHglIndex, 'noOfPersons')?.touched &&
                              formArrayControls(subHglIndex, 'noOfPersons')?.errors }">
                            </p-inputNumber>
                            <span
                              *ngIf="formArrayControls(subHglIndex, 'noOfPersons')?.touched && formArrayControls(subHglIndex, 'noOfPersons')?.invalid">
                              <div class="ng-invalid ng-touched p-error"
                                *ngIf="formArrayControls(subHglIndex, 'noOfPersons')?.errors?.['required']">
                                Enter No Of Persons.</div>
                            </span>
                          </td>
                          <td *ngIf="fbHgl.controls['subHgls'].value.length > 1">
                            <i class="pi pi-fw pi-times-circle text-3xl cursor-pointer"
                              *ngIf="!this.faSubHgl().controls[subHglIndex].get('subHglId')?.value"
                              (click)="faSubHgl().removeAt(subHglIndex)"></i>
                            <i class="pi pi-fw pi-verified text-3xl"
                              *ngIf="this.faSubHgl().controls[subHglIndex].get('subHglId')?.value"></i>
                          </td>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="emptymessage">
                        <tr>
                          <td class="md:text-center" colspan="50%">No Sub HGL Details Found.</td>
                        </tr>
                      </ng-template>
                    </p-table>
                  </div>
                </div>
              </p-fieldset>
            </form>
          </div>
        </div>
      </div>

      <ng-template pTemplate="footer">
        <div class="col-12" style="float:right">
          <button pButton pRipple type="button" label={{submitLabel}} class="p-button-raised p-button-primary"
            [disabled]="fbHgl.invalid" (click)="onSubmit()"></button>
        </div>
      </ng-template>
    </p-dialog>

  </div>
</div>
