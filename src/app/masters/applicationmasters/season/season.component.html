<div class="col-12">
  <div class="card">
    <p-dialog header="Season With Billing Rate" [(visible)]="display" showEffect="fade"
      [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '70vw'}">
     
     
     
        <div class="flex flex-column align-items-center justify-content-center">
            <div class="container">
              <div class="grid p-fluid">
                <form [formGroup]="fbseasons" (ngSubmit)="onSubmit()">
                <p-fieldset legend="Season" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                  <div class="grid p-fluid">

                    <div class="field col-12 md:col-4">
                      <label htmlFor="code"> Code:<sup class="p-error">*</sup></label>
                      <input pInputText id="code" formControlName="code" type="text"[ngClass]="{ 'is-invalid  ng-dirty': FormControls['code'].touched && FormControls['code'].errors }">
                      <span *ngIf="FormControls['code'].touched && FormControls['code'].invalid">
                          <div class="ng-invalid ng-touched p-error"
                              *ngIf="FormControls['code'].errors?.['required']">Please Enter Code.
                          </div>
                          <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['code'].errors?.['pattern']">Code Should Only Contain Names & Numbers.
                          </div>
                          
                      </span>
                  </div>

                    <div class="field col-12 md:col-4">
                      <label htmlFor="Name"> Name:<sup class="p-error">*</sup></label>
                      <input pInputText id="name" formControlName="name" type="text"
                      [ngClass]="{ 'is-invalid ng-dirty': FormControls['name'].touched && FormControls['name'].errors }">
                      <span *ngIf="FormControls['name'].touched && FormControls['name'].invalid">
                          <div class="ng-invalid ng-touched p-error"
                              *ngIf="FormControls['name'].errors?.['required']">Please Enter name.
                          </div>
                          <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['name'].errors?.['pattern']"> name Should Only Contain Alphabets .
                          </div>
                      </span>
                  </div> 


                    <div class="field col-12 md:col-4">
                      <label>Plant Form:<sup class="p-error">*</sup></label>
                      <p-calendar [readonlyInput]="true" [showIcon]="true" formControlName="plantFrom" mask="99/99/9999">
                      </p-calendar> 
                      <span
                      *ngIf="FormControls['plantFrom'].touched && FormControls['plantFrom'].invalid">
                      <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['plantFrom'].errors?.['plantFrom']">Please
                          Select Plant Form Date.</div>

                            </span>
                    </div>


                    <div class="field col-12 md:col-4">
                      <label>Plant To:<sup class="p-error">*</sup></label>
                      <p-calendar [readonlyInput]="true" [showIcon]="true" formControlName="plantTo" mask="99/99/9999">
                      </p-calendar> 

                      <span
                      *ngIf="FormControls['plantTo'].touched && FormControls['plantTo'].invalid">
                      <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['plantTo'].errors?.['required']">Please
                          Select PlantTo Date.</div>

                            </span>
                    </div>


                    <div class="field col-12 md:col-4">
                      <label>Crush Form:<sup class="p-error">*</sup></label>
                      <p-calendar [readonlyInput]="true" [showIcon]="true" formControlName="crushFrom" mask="99/99/9999">
                      </p-calendar> 
                      <span
                      *ngIf="FormControls['crushFrom'].touched && FormControls['crushFrom'].invalid">
                      <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['crushFrom'].errors?.['required']">Please
                          Select Crush Form Date.</div>

                            </span>
                    </div>

                    <div class="field col-12 md:col-4">
                      <label>Crush To<sup class="p-error">*</sup></label>aneRateaneRate
                      <p-calendar [readonlyInput]="true" [showIcon]="true" formControlName="crushTo" mask="99/99/9999">
                      </p-calendar> 
                      <span
                      *ngIf="FormControls['crushTo'].touched && FormControls['crushTo'].invalid">
                      <div class="ng-invalid ng-touched p-error"
                          *ngIf="FormControls['crushTo'].errors?.['required']">Please
                          Select crushTo Date.</div>

                            </span>
                      
                    </div>


                   <div class="field col-12 md:col-4">
                      <label htmlFor="burnCaneRate"> Burn Cane Rate (₹):<sup class="p-error">*</sup></label>
                      <input pInputText id="burnCaneRate" formControlName="burnCaneRate" type="text" 
                         [ngClass]="{ 'is-invalid ng-dirty': FormControls['burnCaneRate'].touched && FormControls['burnCaneRate'].errors }">
                       <span
                          *ngIf="FormControls['burnCaneRate'].touched && FormControls['burnCaneRate'].invalid">
                          <div class="ng-invalid ng-touched p-error"
                              *ngIf="FormControls['burnCaneRate'].errors?.['required']">Please
                              Enter BurnCaneRate.</div>

                              <div class="ng-invalid ng-touched p-error"
                                  *ngIf="FormControls['burnCaneRate'].errors?.['pattern']">BurnCaneRate Should Only Contain Numbers.
                                </div>
                                </span>
                            </div>


                    <div class="field col-12 md:col-4">
                      <label htmlFor="caneRate">Cane Rate (₹):<sup class="p-error">*</sup></label>
                      <input pInputText id="caneRate" formControlName="caneRate" type="text" 
                       [ngClass]="{ 'is-invalid ng-dirty': FormControls['caneRate'].touched && FormControls['caneRate'].errors }">
                      <span
                         *ngIf="FormControls['caneRate'].touched && FormControls['caneRate'].invalid">
                         <div class="ng-invalid ng-touched p-error"
                             *ngIf="FormControls['caneRate'].errors?.['required']">Please
                             Enter CaneRate.</div>

                             <div class="ng-invalid ng-touched p-error"
                                 *ngIf="FormControls['caneRate'].errors?.['pattern']">CaneRate Should Only Contain Numbers.
                               </div>
                               </span>
                           </div>



                    
                    <div class="field col-12 md:col-4">
                      <label htmlFor="capacity"> Capacity(Tonnes):<sup class="p-error">*</sup></label>
                      <input pInputText id="capacity" formControlName="capacity" type="text" 
                       [ngClass]="{ 'is-invalid ng-dirty': FormControls['capacity'].touched && FormControls['capacity'].errors }">
                      <span
                         *ngIf="FormControls['capacity'].touched && FormControls['capacity'].invalid">
                         <div class="ng-invalid ng-touched p-error"
                             *ngIf="FormControls['capacity'].errors?.['required']">Please
                             Enter Capacity.</div>

                             <div class="ng-invalid ng-touched p-error"
                                 *ngIf="FormControls['capacity'].errors?.['pattern']">Capacity Should Only Contain Numbers.
                               </div>
                               </span>
                           </div>



                    <div class="field col-12 md:col-12 ">
                      <div class="col-12">
                       
                      </div>
                    </div>

     <p-tabView styleClass="tabview-custom">
      <p-tabPanel>
          <ng-template pTemplate = "header">
              <span>Farmer</span>
          </ng-template>
          <div class="grid p-fluid">

          <div class="col-12">
            <div class="col-3" style="float:right">
              <button (click)="addItem('former')" pButton pRipple type="button" label="Add Former" icon="pi pi-plus" class="p-button-raised p-button-success" ></button>
            </div>
          </div>
      
          <div formArrayName="former">
            <ng-container *ngIf="fbseasons.get('former') as formArray">
              <div *ngFor="let item of (former).controls; let i = index">
                <div [formGroupName]="i">
  
                  <div class="field col-12 md:col-4" style="display:inline-block; width:33.33%">
                    <label htmlFor="billPeram">Rate:<sup class="p-error">*</sup></label>
                    <p-dropdown [options]="billParam" optionLabel="billPeram" formControlName="billPeram"
                    optionValue="billPeram"></p-dropdown>
                  </div>
        
                  <div class="field col-12 md:col-4" style="display:inline-block; width:33.33%">
                    <label htmlFor="rate">Rate:<sup class="p-error">*</sup></label>
                    <input pInputText id="rate" formControlName="rate" type="text" />
                  </div>
  
                  <div class="field col-12 md:col-4" style="display:inline-block; width:33.33%">
                    <label htmlFor="priority">Priority:<sup class="p-error">*</sup></label>
                    <input pInputText id="priority" formControlName="priority" type="text" />
                  </div>
  
                </div>
              </div>
            </ng-container>
        
          </div>

        </div>
   
      </p-tabPanel>


      <p-tabPanel header="Harvester">
          <ng-template pTemplate = "header">
              <span>Harvester</span>
          </ng-template>
          
          <div class="grid p-fluid">

            <div class="col-12">
              <div class="col-3" style="float:right">
                <button (click)="addItem('harvester')" pButton pRipple type="button" label="Add Harvester" icon="pi pi-plus" class="p-button-raised p-button-success" ></button>
              </div>
            </div>
        
            <div formArrayName="harvester">
              <ng-container *ngIf="fbseasons.get('harvester') as formArray">
                <div *ngFor="let item of (harvester).controls; let i = index">
                  <div [formGroupName]="i">
    
                    <div class="field col-12 md:col-4" style="display:inline-block; ">
                      <label htmlFor="billPeram">Rate:<sup class="p-error">*</sup></label>
                    <p-dropdown [options]="billParam" optionLabel="billPeram" formControlName="billPeram"
                    optionValue="billPeram"></p-dropdown>
                    </div>
          
                    <div class="field col-12 md:col-4" style="display:inline-block; ">
                      <label htmlFor="rate">Rate:<sup class="p-error">*</sup></label>
                      <input pInputText id="rate" formControlName="rate" type="text" />
                    </div>
    
                    <div class="field col-12 md:col-4" style="display:inline-block;">
                      <label htmlFor="priority">Priority:<sup class="p-error">*</sup></label>
                      <input pInputText id="priority" formControlName="priority" type="text" />
                    </div>
    
                  </div>
                </div>
              </ng-container>
          
            </div>

          </div>
          
      </p-tabPanel>
      
      <p-tabPanel header="Header III">
          <ng-template pTemplate = "header">
              <span>Transporter</span>
             
          </ng-template>
          <div class="grid p-fluid">

            <div class="col-12">
              <div class="col-3" style="float:right">
                <button (click)="addItem('tranceporter')" pButton pRipple type="button" label="Add Tranceporter" icon="pi pi-plus" class="p-button-raised p-button-success" ></button>
              </div>
            </div>
        
            <div formArrayName="tranceporter">
              <ng-container *ngIf="fbseasons.get('tranceporter') as formArray">
                <div *ngFor="let item of (tranceporter).controls; let i = index">
                  <div [formGroupName]="i">
    
                    <div class="field col-12 md:col-4"style="display:inline-block; ">
                      <label htmlFor="billPeram">Rate:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="billParam" optionLabel="billPeram" formControlName="billPeram"
                      optionValue="billPeram"></p-dropdown>

                    </div>
          
                    <div class="field col-12 md:col-4" style="display:inline-block; ">
                      <label htmlFor="rate">Rate:<sup class="p-error">*</sup></label>
                      <input pInputText id="rate" formControlName="rate" type="text" />
                    </div>
    
                    <div class="field col-12 md:col-4" style="display:inline-block;">
                      <label htmlFor="priority">Priority:<sup class="p-error">*</sup></label>
                      <input pInputText id="priority" formControlName="priority" type="text" />
                    </div>
    
                  </div>
                </div>
              </ng-container>
          
            </div>

          </div>
      </p-tabPanel>
      <p-tabPanel header="Header III">
        <ng-template pTemplate = "header">
            <span>Seed</span>
        </ng-template>
        <div class="grid p-fluid">

          <div class="col-12">
            <div class="col-3" style="float:right">
              <button (click)="addItem('seed')" pButton pRipple type="button" label="Add Seed" icon="pi pi-plus" class="p-button-raised p-button-success" ></button>
            </div>
          </div>
      
          <div formArrayName="seed">
            <ng-container *ngIf="fbseasons.get('seed') as formArray">
              <div *ngFor="let item of (seed).controls; let i = index">
                <div [formGroupName]="i">
  
                  <div class="field col-12 md:col-4"style="display:inline-block; ">
                    <label htmlFor="billPeram">Rate:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="billParam" optionLabel="billPeram" formControlName="billPeram"
                      optionValue="billPeram"></p-dropdown>
                  </div>
        
                  <div class="field col-12 md:col-4" style="display:inline-block; ">
                    <label htmlFor="rate">Rate:<sup class="p-error">*</sup></label>
                    <input pInputText id="rate" formControlName="rate" type="text" />
                  </div>
  
                  <div class="field col-12 md:col-4" style="display:inline-block;">
                    <label htmlFor="priority">Priority:<sup class="p-error">*</sup></label>
                    <input pInputText id="priority" formControlName="priority" type="text" />
                  </div>
  
                </div>
              </div>
            </ng-container>
        
          </div>

        </div>
    </p-tabPanel>
  </p-tabView>
 

   
    </div>

  </p-fieldset>

    <div class="field col-12 md:col-3 ">
    <div class="col-6">
      <label htmlFor="isActive">Is Active?:</label><br>
      <p-inputSwitch [(ngModel)]="valSwitch" formControlName="isActive"></p-inputSwitch>
      </div>
      </div>  
      
     </form>

     </div>
     </div>
         
        </div>

      <ng-template pTemplate="footer">
        <div class="col-12">
          <div class="col-4" style="float:right">
            <button pButton pRipple type="submit" [label]="submitLabel" class="p-button-raised p-button-success"
              (click)="onSubmit()"></button>
          </div>
        </div>
      </ng-template>
    </p-dialog>

    <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
        <h4>Season</h4>
      </ng-template>
      <ng-template pTemplate="right">
        <button pButton pRipple label="New Season" icon="pi pi-plus" class="p-button-success p-mr-2"
          (click)="Initseason({})"></button>
      </ng-template>
    </p-toolbar>

    <p-table #dt1 [value]="seasons" dataKey="id" [rows]="10" [loading]="loading" [rowHover]="true"
      styleClass="p-datatable-gridlines p-datatable-striped p-datatable-sm" [paginator]="true"
      [globalFilterFields]="['name','country.name','representative.name','status']" [autoLayout]="true"
      responsiveLayout="scroll" [rowsPerPageOptions]="[10,25,50]" [tableStyle]="{ width: 'max-content'}">
      <ng-template pTemplate="caption">
        <div class="flex justify-content-between flex-column sm:flex-row">
          <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash"
            (click)="clear(dt1)"></button>
          <span class="p-input-icon-left mb-2">
            <i class="pi pi-search"></i>
            <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Search Keyword"
              class="w-full" />
          </span>
        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th></th>
          <th pSortableColumn="villageId">Season Id<p-columnFilter type="text" field="villageId"
            display="menu"></p-columnFilter><p-sortIcon field="villageId"></p-sortIcon>
         </th>
          <th pSortableColumn="villageId">Season Code<p-columnFilter type="text" field="villageId"
            display="menu"></p-columnFilter><p-sortIcon field="villageId"></p-sortIcon>
         </th>
          <th pSortableColumn="villageCode">Season Name<p-columnFilter type="text" field="villageCode"
            display="menu"></p-columnFilter><p-sortIcon field="villageCode"></p-sortIcon>
        </th>
          <th pSortableColumn="villageName">PlantForm<p-columnFilter type="text" field="villageName"
            display="menu"></p-columnFilter><p-sortIcon field="villageName"></p-sortIcon>
        </th>
      
          <th pSortableColumn="villageName">Plant To<p-columnFilter type="text" field="villageName"
        display="menu"></p-columnFilter><p-sortIcon field="villageName"></p-sortIcon>
        </th>
          <th pSortableColumn="sectionId">CrushForm<p-columnFilter type="text" field="sectionId"
            display="menu"></p-columnFilter><p-sortIcon field="sectionId"></p-sortIcon>
        </th>
          <th pSortableColumn="sectionName">CrushTo<p-columnFilter type="text" field="sectionName"
            display="menu"></p-columnFilter><p-sortIcon field="sectionName"></p-sortIcon>
        </th>
          <th pSortableColumn="mandalId">BurnCaneRate<p-columnFilter type="text" field="mandalId"
            display="menu"></p-columnFilter><p-sortIcon field="mandalId"></p-sortIcon>
        </th>
          <th pSortableColumn="mandalName">CaneRate<p-columnFilter type="text" field="mandalName"
            display="menu"></p-columnFilter><p-sortIcon field="mandalName"></p-sortIcon>
        </th>
          <th pSortableColumn="districtId">Capacity<p-columnFilter type="text" field="districtId"
            display="menu"></p-columnFilter><p-sortIcon field="districtId"></p-sortIcon>
        </th>
        <th pSortableColumn="districtId">Current Season<p-columnFilter type="text" field="districtId"
          display="menu"></p-columnFilter><p-sortIcon field="districtId"></p-sortIcon>
        </th>
        <th pSortableColumn="districtId">Is Active<p-columnFilter type="text" field="districtId"
        display="menu"></p-columnFilter><p-sortIcon field="districtId"></p-sortIcon>
          </th>
          <th pSortableColumn="updatedAt">Updated At<p-columnFilter type="text" field="updatedAt"
            display="menu"></p-columnFilter><p-sortIcon field="updatedAt"></p-sortIcon>
        </th>
          <th pSortableColumn="createdAt">Created At<p-columnFilter type="text" field="createdAt"
            display="menu"></p-columnFilter><p-sortIcon field="createdAt"></p-sortIcon>
        </th>
          <th pSortableColumn="updatedBy">Updated By<p-columnFilter type="text" field="updatedBy"
            display="menu"></p-columnFilter><p-sortIcon field="updatedBy"></p-sortIcon>
        </th>
          <th pSortableColumn="createdBy">Created By<p-columnFilter type="text" field="createdBy"
            display="menu"></p-columnFilter><p-sortIcon field="createdBy"></p-sortIcon>
        </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-seasons>
        <tr>
          <td><button pButton pRipple icon="pi pi-pencil" class="p-element p-ripple p-button-text p-button p-component"
              (click)="Initseason(seasons)"></button></td>
          <td>{{seasons.seasonId}}</td>
          <td>{{seasons.code}}</td>
          <td>{{seasons.name}}</td>
          <td>{{seasons.plantFrom}}</td>
          <td>{{seasons.plantTo}}</td>
          <td>{{seasons.crushFrom}}</td>
          <td>{{seasons.crushTo}}</td>
          <td>{{seasons.burnCaneRate}}</td>
          <td>{{seasons.caneRate}}</td>
          <td>{{seasons.capacity}}</td>
          <td>{{seasons.currentSeason}}</td>
          
          <td style="text-align:center">
            <p-checkbox name="active" value="active" [(ngModel)]="seasons.isActive" [binary]="true" [disabled]="true">
            </p-checkbox>
          </td>
          <td>{{seasons.updatedAt}}</td>
          <td>{{seasons.createdAt}}</td>
          <td>{{seasons.updatedBy}}</td>
          <td>{{seasons.createdBy}}</td>

        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="8">No Season found.</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="loadingbody">
        <tr>
          <td colspan="8">Loading.. Season data. Please wait.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

</div>
