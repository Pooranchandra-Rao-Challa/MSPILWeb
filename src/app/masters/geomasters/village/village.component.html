<div class="col-12">
  <div class="card">
    <p-dialog header="Village" [(visible)]="display" showEffect="fade"
      [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '70vw'}" [modal]="true">
      <ng-template pTemplate="content">
        <div class="flex flex-column align-items-center justify-content-center">
          <form [formGroup]="fbvillages" (ngSubmit)="onSubmit()">
            <div class="container">
              <div class="grid p-fluid">
                <p-fieldset legend="Geographic Info" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                  <div class="grid p-fluid">
                    <div class="field col-12 md:col-4">
                      <label htmlFor="age1">Division:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="divisions" optionLabel="divisionName"
                        optionValue="divisionId" (onChange)="initCircles($event.value)" [autoDisplayFirst]="false"
                        formControlName="divisionId"
                        [ngClass]="{ 'is-invalid ng-dirty': FormControls['divisionId'].touched && FormControls['divisionId'].errors }"></p-dropdown>
                      <span *ngIf="FormControls['divisionId'].touched && FormControls['divisionId'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['divisionId'].errors?.['required']">Please Select
                          Division.
                        </div>
                      </span>
                    </div>
                    <div class="field col-12 md:col-4">
                      <label htmlFor="circle">Circle:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="circles" optionLabel="name"  optionValue="circleId"
                        (onChange)="initSections($event.value)" [autoDisplayFirst]="false"
                        formControlName="circleId"
                        [ngClass]="{ 'is-invalid ng-dirty': FormControls['circleId'].touched && FormControls['circleId'].errors }">
                      </p-dropdown>
                      <span *ngIf="FormControls['circleId'].touched && FormControls['circleId'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['circleId'].errors?.['required']">Please Select
                          Circle.
                        </div>
                      </span>
                    </div>
                    <div class="field col-12 md:col-4">
                      <label htmlFor="section">Sections:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="sections" optionLabel="name" optionValue="sectionId"
                        [autoDisplayFirst]="false" formControlName="sectionId"
                        [ngClass]="{ 'is-invalid ng-dirty': FormControls['sectionId'].touched && FormControls['sectionId'].errors }">
                      </p-dropdown>
                      <span *ngIf="FormControls['sectionId'].touched && FormControls['sectionId'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['sectionId'].errors?.['required']">Please Select
                          Section.
                        </div>
                      </span>
                    </div>
                    <div class="field col-12 md:col-4">
                      <label htmlFor="age1">State:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="states" optionLabel="name" optionValue="stateId"
                        (onChange)="initDistricts($event.value)" [autoDisplayFirst]="false"
                        formControlName="stateId"
                        [ngClass]="{ 'is-invalid ng-dirty': FormControls['stateId'].touched && FormControls['stateId'].errors }"></p-dropdown>
                      <span *ngIf="FormControls['stateId'].touched && FormControls['stateId'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['stateId'].errors?.['required']">Please Select
                          State.
                        </div>
                      </span>
                    </div>
                    <div class="field col-12 md:col-4">
                      <label htmlFor="districtId">Districts:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="districts" optionLabel="name" optionValue="districtId"
                        (onChange)="initMandals($event.value)" [autoDisplayFirst]="false"
                        formControlName="districtId"
                        [ngClass]="{ 'is-invalid ng-dirty':FormControls['districtId'].touched && FormControls['districtId'].errors }">
                      </p-dropdown>
                      <span *ngIf="FormControls['districtId'].touched && FormControls['districtId'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['districtId'].errors?.['required']">Please
                          Select District.
                        </div>
                      </span>
                    </div>
                    <div class="field col-12 md:col-4">
                      <label htmlFor="circle">Mandals:<sup class="p-error">*</sup></label>
                      <p-dropdown [options]="mandals" optionLabel="name" optionValue="mandalId" [autoDisplayFirst]="false"
                        formControlName="mandalId"
                        [ngClass]="{ 'is-invalid ng-dirty': FormControls['mandalId'].touched && FormControls['mandalId'].errors }">
                      </p-dropdown>
                      <span *ngIf="FormControls['mandalId'].touched && FormControls['mandalId'].invalid">
                        <div class="ng-invalid ng-touched p-error" *ngIf="FormControls['mandalId'].errors?.['required']">Please Select
                          Mandals.
                        </div>
                      </span>
                    </div>
                  </div>
                </p-fieldset>

                <p-fieldset legend="Village Info" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                  <div class="grid p-fluid">
                    <div class="field col-12 md:col-3">
                      <label for="code">Village Code:<sup class="p-error">*</sup></label>
                      <input pInputText inputId="code" formControlName="code" type="text" />
                      <div *ngIf="FormControls['code'].invalid &&  FormControls['code'].touched"
                        class="error-message p-error">
                        Village Code required
                      </div>
                    </div>

                    <div class="field col-12 md:col-3">
                      <label htmlFor="name">Village Name:<sup class="p-error">*</sup></label>
                      <input pInputText id="name" formControlName="name" type="text" />
                      <div *ngIf="FormControls['name'].invalid &&  FormControls['name'].touched"
                        class="error-message p-error">
                        Village Name required
                      </div>
                    </div>


                    <div class="field col-12 md:col-3">
                      <label for="inchargeName">Incharge Name:</label>
                      <input pInputText id="inchargeName" formControlName="inchargeName" type="text" />


                    </div>
                    <div class="field col-12 md:col-3">
                      <label for="inchargePhoneNo">Incharge Phone No.:</label>
                      <p-inputNumber inputId="inchargePhoneNo" formControlName="inchargePhoneNo"
                        mode="decimal" [useGrouping]="false" [size]="10" [maxlength]="10">
                      </p-inputNumber>
                    </div>



                    <div class="field col-8 md:col-3">
                      <label htmlFor="address">Address:</label>
                      <textarea rows="5" cols="30" formControlName="address" placeholder="Village Address"
                        pInputTextarea></textarea>

                    </div>
                    <div class="field col-12 md:col-3">
                      <label for="PinCode">Pin Code:</label>
                      <p-inputNumber inputId="pinCode" formControlName="pinCode" mode="decimal" [useGrouping]="false"
                      [size]="6" [maxlength]="6">
                      </p-inputNumber>


                    </div>

                    <div class="field col-12 md:col-3">
                      <label for="distance">Distance:<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="distance" formControlName="distance" [minFractionDigits]="2">
                      </p-inputNumber>
                      <div *ngIf="FormControls['distance'].invalid &&  FormControls['distance'].touched"
                        class="error-message p-error">
                        Distance required
                      </div>
                    </div>
                    <div class="field col-12 md:col-3">
                      <label for="divertedDistance">Diverted Distance:<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="divertedDistance" formControlName="divertedDistance"
                        [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['divertedDistance'].invalid &&  FormControls['divertedDistance'].touched"
                        class="error-message p-error">
                        Diverted Distance required
                      </div>
                    </div>

                  </div>
                </p-fieldset>

                <p-fieldset legend="Land Info" class="col-12" [toggleable]="true" [transitionOptions]="'500ms'">
                  <div class="grid p-fluid">

                    <div class="field col-12 md:col-3">
                      <label for="cultivableArea">Cultivatable Area(Acres):<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="cultivableArea" formControlName="cultivableArea" [minFractionDigits]="2">
                      </p-inputNumber>
                      <div *ngIf="FormControls['cultivableArea'].invalid &&  FormControls['cultivableArea'].touched"
                        class="error-message p-error">
                        Cultivatable Area is required
                      </div>
                    </div>


                    <div class="field col-12 md:col-3">
                      <label for="irrigationArea">Irrigation Area(In Peek Summer):<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="irrigationArea" formControlName="irrigationArea" [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['irrigationArea'].invalid &&  FormControls['irrigationArea'].touched"
                        class="error-message p-error">
                        Irrigation Area is required
                      </div>
                    </div>
                    <div class="field col-12 md:col-3">
                      <label for="potentialArea">Suitable Area for Cane(Acres):<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="potentialArea" formControlName="potentialArea" mode="decimal"
                        locale="en-US" [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['potentialArea'].invalid &&  FormControls['potentialArea'].touched"
                        class="error-message p-error">
                        Suitable Area for Cane is required
                      </div>
                    </div>

                    <div class="field col-12 md:col-3">
                      <label for="totalArea">Total Geographic Area(Acres):<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="totalArea" formControlName="totalArea" [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['totalArea'].invalid &&  FormControls['totalArea'].touched"
                        class="error-message p-error">
                        Total Geographic Area is required
                      </div>
                    </div>

                    <div class="field col-12 md:col-4">
                      <label for="dryArea">Dry Area(Acres):<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="dryArea" formControlName="dryArea" [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['dryArea'].invalid &&  FormControls['dryArea'].touched"
                        class="error-message p-error">
                        Dry Area is required
                      </div>
                    </div>

                    <div class="field col-12 md:col-4">
                      <label for="notSuitableArea">Not Suitable:<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="notSuitableArea" formControlName="notSuitableArea" mode="decimal"
                        locale="de-DE" [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['notSuitableArea'].invalid &&  FormControls['notSuitableArea'].touched"
                        class="error-message p-error">
                        Not Suitable is requiredF
                      </div>
                    </div>

                    <div class="field col-12 md:col-4">
                      <label for="target">Target Area</label>
                      <p-inputNumber formControlName="targetArea" inputId="target">
                      </p-inputNumber>

                    </div>



                    <div class="field col-12 md:col-4">
                      <label for="noOfEbservices">No Of EB Services:<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="noOfEbservices" formControlName="noOfEbservices" [minFractionDigits]="0">
                      </p-inputNumber>
                      <div *ngIf="FormControls['noOfEbservices'].invalid &&  FormControls['noOfEbservices'].touched"
                        class="error-message p-error">
                        No Of EB Services is required
                      </div>
                    </div>
                    <div class="field col-12 md:col-4">
                      <label for="tptrate">TPT Rate(₹):<sup class="p-error">*</sup></label>
                      <p-inputNumber inputId="tptRate" formControlName="tptrate" [minFractionDigits]="2">
                      </p-inputNumber>

                      <div *ngIf="FormControls['tptrate'].invalid &&  FormControls['tptrate'].touched"
                        class="error-message p-error">
                        TPT Rate is required
                      </div>
                    </div>

                  </div>

                </p-fieldset>

                <div class="field col-12 md:col-3 ">
                  <div class="col-6">
                    <label htmlFor="isActive">Is Active?:</label><br>
                    <p-inputSwitch [(ngModel)]="valSwitch" formControlName="isActive"></p-inputSwitch>
                  </div>
                </div>
                <div class="field col-12 md:col-3">
                  <label for="listingOrder">Listing Order:<sup class="p-error">*</sup></label>
                  <p-inputNumber inputId="locale-indian" formControlName="listingOrder" mode="decimal"
                    locale="en-IN"  [useGrouping]="false" [size]="6" [maxlength]="6">
                  </p-inputNumber>
                  <div *ngIf="FormControls['listingOrder'].invalid &&  FormControls['listingOrder'].touched"
                    class="error-message p-error">
                    Listing Order is required
                  </div>
                </div>

              </div>
            </div>
          </form>
        </div>
      </ng-template>
      <ng-template pTemplate="footer">
        <div class="col-12">
          <div style="float:right">
            <button pButton pRipple type="submit" [label]="submitLabel" class="p-button-raised p-button-success"
              (click)="onSubmit()"></button>
          </div>
        </div>
      </ng-template>
    </p-dialog>

    <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
        <h4>Villages</h4>
      </ng-template>
      <ng-template pTemplate="right">
        <button pButton pRipple label="New Village" icon="pi pi-plus" class="p-button-success p-mr-2"
          (click)="InitVillage({})"></button>
      </ng-template>
    </p-toolbar>

    <p-table #dt1 [value]="villages" dataKey="id" [rows]="10" [loading]="loading" [rowHover]="true"
      styleClass="p-datatable-gridlines p-datatable-striped p-datatable-sm" [paginator]="true"
      [globalFilterFields]="['name','country.name','representative.name','status']" [autoLayout]="true"
      responsiveLayout="scroll" [rowsPerPageOptions]="[10,25,50]" [tableStyle]="{ width: 'max-content'}">
      <ng-template pTemplate="caption">
        <div class="flex justify-content-between flex-column sm:flex-row">
          <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash"
            (click)="clear(dt1)"></button>
          <span class="p-input-icon-left mb-2">
            <i class="pi pi-search"></i>
            <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Search Keyword"
              class="w-full" />
          </span>
        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th></th>
          <th pSortableColumn="villageId">Village Id<p-columnFilter type="text" field="villageId"
            display="menu"></p-columnFilter><p-sortIcon field="villageId"></p-sortIcon>
         </th>
          <th pSortableColumn="villageCode">Village Code<p-columnFilter type="text" field="villageCode"
            display="menu"></p-columnFilter><p-sortIcon field="villageCode"></p-sortIcon>
        </th>
          <th pSortableColumn="villageName">Village Name<p-columnFilter type="text" field="villageName"
            display="menu"></p-columnFilter><p-sortIcon field="villageName"></p-sortIcon>
        </th>
          <th pSortableColumn="sectionId">Section Id<p-columnFilter type="text" field="sectionId"
            display="menu"></p-columnFilter><p-sortIcon field="sectionId"></p-sortIcon>
        </th>
          <th pSortableColumn="sectionName">Section NAme<p-columnFilter type="text" field="sectionName"
            display="menu"></p-columnFilter><p-sortIcon field="sectionName"></p-sortIcon>
        </th>
          <th pSortableColumn="mandalId">Mandal Id<p-columnFilter type="text" field="mandalId"
            display="menu"></p-columnFilter><p-sortIcon field="mandalId"></p-sortIcon>
        </th>
          <th pSortableColumn="mandalName">Mandal Name<p-columnFilter type="text" field="mandalName"
            display="menu"></p-columnFilter><p-sortIcon field="mandalName"></p-sortIcon>
        </th>
          <th pSortableColumn="districtId">District Id<p-columnFilter type="text" field="districtId"
            display="menu"></p-columnFilter><p-sortIcon field="districtId"></p-sortIcon>
        </th>
          <th pSortableColumn="districtName">District Name<p-columnFilter type="text" field="districtName"
            display="menu"></p-columnFilter><p-sortIcon field="districtName"></p-sortIcon>
        </th>
          <th pSortableColumn="divisionId">Division Id<p-columnFilter type="text" field="divisionId"
            display="menu"></p-columnFilter><p-sortIcon field="divisionId"></p-sortIcon>
        </th>
          <th pSortableColumn="divisionName">Division Name<p-columnFilter type="text" field="divisionName"
            display="menu"></p-columnFilter><p-sortIcon field="divisionName"></p-sortIcon>
        </th>
          <th pSortableColumn="circleId">Circle Id<p-columnFilter type="text" field="circleId"
            display="menu"></p-columnFilter><p-sortIcon field="circleId"></p-sortIcon>
        </th>
          <th pSortableColumn="circleName">Circle Name<p-columnFilter type="text" field="circleName"
            display="menu"></p-columnFilter><p-sortIcon field="circleName"></p-sortIcon>
        </th>
          <th pSortableColumn="inchargeName">Incharge Name<p-columnFilter type="text" field="inchargeName"
            display="menu"></p-columnFilter><p-sortIcon field="inchargeName"></p-sortIcon>
        </th>
          <th pSortableColumn="inchargePhoneNo">InchargePhone No<p-columnFilter type="text" field="inchargePhoneNo"
            display="menu"></p-columnFilter><p-sortIcon field="inchargePhoneNo"></p-sortIcon>
        </th>
          <th pSortableColumn="address">Address<p-columnFilter type="text" field="address"
            display="menu"></p-columnFilter><p-sortIcon field="address"></p-sortIcon>
        </th>
          <th pSortableColumn="pinCode">Pincode<p-columnFilter type="text" field="pinCode"
            display="menu"></p-columnFilter><p-sortIcon field="pinCode"></p-sortIcon>
        </th>
          <th pSortableColumn="distance">Distance<p-columnFilter type="text" field="distance"
            display="menu"></p-columnFilter><p-sortIcon field="distance"></p-sortIcon>
        </th>
          <th pSortableColumn="divertedDistance">DivertedDistance<p-columnFilter type="text" field="divertedDistance"
            display="menu"></p-columnFilter><p-sortIcon field="divertedDistance"></p-sortIcon>
        </th>
          <th pSortableColumn="noOfEbservices">No ofEbservices<p-columnFilter type="text" field="noOfEbservices"
            display="menu"></p-columnFilter><p-sortIcon field="noOfEbservices"></p-sortIcon>
        </th>
          <th pSortableColumn="tptRate">Tpt Rate<p-columnFilter type="text" field="tptRate"
            display="menu"></p-columnFilter><p-sortIcon field="tptRate"></p-sortIcon>
        </th>
          <th pSortableColumn="totalArea">Total Area<p-columnFilter type="text" field="totalArea"
            display="menu"></p-columnFilter><p-sortIcon field="totalArea"></p-sortIcon>
        </th>
          <th pSortableColumn="cultivableArea">Cultivable Area<p-columnFilter type="text" field="cultivableArea"
            display="menu"></p-columnFilter><p-sortIcon field="cultivableArea"></p-sortIcon>
        </th>
          <th pSortableColumn="irrigationArea">IrrigationArea<p-columnFilter type="text" field="irrigationArea"
            display="menu"></p-columnFilter><p-sortIcon field="irrigationArea"></p-sortIcon>
        </th>
          <th pSortableColumn="dryArea">Dry Area<p-columnFilter type="text" field="dryArea"
            display="menu"></p-columnFilter><p-sortIcon field="dryArea"></p-sortIcon>
        </th>
          <th pSortableColumn="potentialArea">Potential Area<p-columnFilter type="text" field="potentialArea"
            display="menu"></p-columnFilter><p-sortIcon field="potentialArea"></p-sortIcon>
        </th>

          <th pSortableColumn="notSuitableArea">Not Suitable Area<p-columnFilter type="text" field="notSuitableArea"
            display="menu"></p-columnFilter><p-sortIcon field="notSuitableArea"></p-sortIcon>
        </th>
          <th pSortableColumn="targetTons">Target Tons<p-columnFilter type="text" field="targetTons"
            display="menu"></p-columnFilter><p-sortIcon field="targetTons"></p-sortIcon>
        </th>
          <th pSortableColumn="listingOrder">Listing Order<p-columnFilter type="text" field="listingOrder"
            display="menu"></p-columnFilter><p-sortIcon field="listingOrder"></p-sortIcon>
        </th>
          <th pSortableColumn="isActive">Is Active<p-sortIcon field="isActive"></p-sortIcon>
        </th>
          <th pSortableColumn="updatedAt">Updated At<p-columnFilter type="text" field="updatedAt"
            display="menu"></p-columnFilter><p-sortIcon field="updatedAt"></p-sortIcon>
        </th>
          <th pSortableColumn="createdAt">Created At<p-columnFilter type="text" field="createdAt"
            display="menu"></p-columnFilter><p-sortIcon field="createdAt"></p-sortIcon>
        </th>
          <th pSortableColumn="updatedBy">Updated By<p-columnFilter type="text" field="updatedBy"
            display="menu"></p-columnFilter><p-sortIcon field="updatedBy"></p-sortIcon>
        </th>
          <th pSortableColumn="createdBy">Created By<p-columnFilter type="text" field="createdBy"
            display="menu"></p-columnFilter><p-sortIcon field="createdBy"></p-sortIcon>
        </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-village>
        <tr>
          <td><button pButton pRipple icon="pi pi-pencil" class="p-element p-ripple p-button-text p-button p-component"
              (click)="InitVillage(village)"></button></td>
          <td>{{village.villageId}}</td>
          <td>{{village.villageCode}}</td>
          <td>{{village.villageName}}</td>
          <td>{{village.sectionId}}</td>
          <td>{{village.sectionName}}</td>
          <td>{{village.mandalId}}</td>
          <td>{{village.mandalName}}</td>
          <td>{{village.districtId}}</td>
          <td>{{village.districtName}}</td>
          <td>{{village.divisionId}}</td>
          <td>{{village.divisionName}}</td>
          <td>{{village.circleId}}</td>
          <td>{{village.circleName}}</td>
          <td>{{village.inchargeName}}</td>
          <td>{{village.inchargePhoneNo}}</td>
          <td>{{village.address}}</td>
          <td>{{village.pinCode}}</td>
          <td>{{village.distance}}</td>
          <td>{{village.divertedDistance}}</td>
          <td>{{village.noOfEbservices}}</td>
          <td>{{village.tptRate}}</td>
          <td>{{village.totalArea}}</td>
          <td>{{village.cultivableArea}}</td>
          <td>{{village.irrigationArea}}</td>
          <td>{{village.dryArea}}</td>
          <td>{{village.potentialArea}}</td>
          <td>{{village.notSuitableArea}}</td>
          <td>{{village.targetTons}}</td>
          <td>{{village.listingOrder}}</td>
          <td style="text-align:center">
            <p-checkbox name="active" value="active" [(ngModel)]="village.isActive" [binary]="true" [disabled]="true">
            </p-checkbox>
          </td>
          <td>{{village.updatedAt}}</td>
          <td>{{village.createdAt}}</td>
          <td>{{village.updatedBy}}</td>
          <td>{{village.createdBy}}</td>

        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="8">No Villages found.</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="loadingbody">
        <tr>
          <td colspan="8">Loading.. Villages data. Please wait.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

</div>
